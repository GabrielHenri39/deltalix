{% extends 'base/base.html' %}
{% load static %}

{% block 'title' %}Serviços{% endblock 'title' %}

{% block 'head' %}
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <link rel="stylesheet" href="{% static 'services/css/service.css' %}">
{% endblock 'head' %}

{% block nav %}
  {% include 'partials/navebar.html' %}
{% endblock nav %}

{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-8 text-center">
      
      {% if messages %}
        <div class="mb-3">
          {% for message in messages %}
            <div class="alert {{ message.tags }} text-center">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
        
      <h1 class="fw-bold text-success mb-4">Nossos Serviços Específicos</h1>
      <p class="lead mb-5">
        Oferecemos soluções completas para o manejo, tratamento e destino final de resíduos sólidos, 
        sempre obedecendo a critérios técnicos rigorosos para minimizar riscos à saúde pública 
        e à qualidade do meio ambiente.
      </p>
      <hr>
      <div>
       {% include "partials/carousel.html" %}
      </div>
      <hr>
      <br>
      <ul class="list-unstyled">
        {% for categoria in categorias %}
          <li class="mb-4 border-bottom pb-3">
            <h2 class="fw-semibold text-success">{{ categoria.nome }}</h2>
            <p class="text-muted">{{ categoria.descricao|default:"Sem descrição disponível." }}</p>
          </li>
        {% empty %}
          <li><p class="text-muted">Nenhuma categoria cadastrada.</p></li>
        {% endfor %}
      </ul>
    </div>
    
    <div class="col-12 col-md-10 col-lg-8">
      <h2 class="fw-bold text-success mb-4">Solicite de Serviços</h2>
      <p class="lead mb-4">
        Preencha o formulário abaixo para solicitar um serviço específico. 
        Nossa equipe entrará em contato o mais breve possível.
      </p>
    </div>

    <form action="{% url 'service_list' %}" method="post" class=" formulario-bg container mb-3">
      {% csrf_token %}
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ servico_form.nome.label }}</label>
          {{ servico_form.nome }}
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ servico_form.email.label }}</label>
          {{ servico_form.email }}
        </div>
        <div class="col-md-12 mb-3">
          <label class="form-label">{{ servico_form.categoria.label }}</label>
          {{ servico_form.categoria }}
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ servico_form.telefone.label }}</label>
          {{ servico_form.telefone }}
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ servico_form.cep.label }}</label>
          {{ servico_form.cep }}
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ servico_form.cidade.label }}</label>
          {{ servico_form.cidade }}
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ servico_form.bairro.label }}</label>
          {{ servico_form.bairro }}
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ servico_form.rua.label }}</label>
          {{ servico_form.rua }}
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ servico_form.numero.label }}</label>
          {{ servico_form.numero }}
        </div>
        <div class="col-md-12 mb-3">
          <label class="form-label">{{ servico_form.complemento.label }}</label>
          {{ servico_form.complemento }}
        </div>
        <div class="col-md-12 mb-3">
          <label class="form-label">{{ servico_form.descricao.label }}</label>
          {{ servico_form.descricao }}
        </div>
        <div class="col-md-12 text-center mt-4">
          <button type="submit" class="btn btn-success">Enviar Solicitação</button>
        </div>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block scripts %}
  <script src="{% static 'services/js/select2-init.js' %}"></script>
  <script src="{% static 'services/js/api.js' %}"></script>
{% endblock scripts %}
{% block footer %}
  {% include 'partials/footer_m.html' %}
{% endblock footer %}